function wphc_do_ajax(o,t,a){var n={action:o};jQuery("#"+o+"_wpnonce").length&&(_wpnonce=jQuery("#"+o+"_wpnonce").val(),n=jQuery.extend(n,{_wpnonce:_wpnonce})),"object"==typeof t&&(n=jQuery.extend(n,t)),"string"==typeof a&&(a="#"+a,a=!!jQuery(a).length&&jQuery(a)),jQuery.ajax({method:"POST",url:ajaxurl,data:n,beforeSend:function(){a&&a.html('<p class="wphc_loading"><img src="/wp-admin/images/loading.gif" /> Loading...</p>')}}).done(function(t){"wphc_wp_auto_update"===o&&jQuery(".wphc_wp_auto_update_success").show(),a&&a.html(t)}).fail(function(){"wphc_wp_auto_update"===o&&jQuery(".wphc_wp_auto_update_fail").show(),window.alert("fail")})}function wphc_do_pointer(t,o,a){jQuery("#"+a).pointer({content:"<h3>"+t+"</h3><p>"+o+"</p>",position:{edge:"left",align:"middle"}}),jQuery("#"+a).on("click",function(){jQuery("#"+a).pointer("open")})}jQuery(document).ready(function(n){function t(t){var o=!0,a=!1;t=t.match(/history/)?(a=!(o=!1),"wphc_autoload_history"):"wphc_autoload_list",n("#wphc-autoload-list").is(":visible")||(n("#wphc-autoload-list").empty(),n("#wphc-autoload-list").show()),wphc_do_ajax(t,null,"wphc-autoload-list"),n("#wphc-btn-autoload-history").prop("disabled",a),n("#wphc-btn-autoload-list").prop("disabled",o)}postboxes.add_postbox_toggles(pagenow),n(document).on("click","#wphc-btn-transients-all",function(){wphc_do_ajax("wphc_transients_cleanup",null,"wphc-transients-stats")}).on("click","#wphc-btn-transients-expired",function(){wphc_do_ajax("wphc_transients_cleanup",{expired:"1"},"wphc-transients-stats")}).on("click","#wphc-btn-transients-object",function(){wphc_do_ajax("wphc_transients_cleanup",{object_cache:"1"},"wphc-transients-stats")}).on("click","#wphc-btn-autoload-list",function(){t("list")}).on("click","#wphc-btn-autoload-history",function(){t("history")}).on("click","#wphc-btn-autoload-close",function(){n("#wphc-autoload-list").hide(),n("#wphc-btn-autoload-history").prop("disabled",!1),n("#wphc-btn-autoload-list").prop("disabled",!1)}).on("click",".wphc-notice .notice-dismiss",function(){wphc_do_ajax("wphc_hide_admin_notice",{software:n(this).closest(".wphc-notice").attr("class").match(/wphc-notice-(?:php|database|wordpress|web|ssl|https|plugins)\s/)[0].replace("wphc-notice-","")},!1)}).on("click","#wphc-btn-wp-auto-update",function(){wphc_do_ajax("wphc_wp_auto_update",{wp_auto_update:n('input[name="wphc-opt-wp-updates"]:checked').val()},!1)}),n(document).on("submit","#wphc-autoload-form",function(){var t=n("#wphc-autoload-form").serializeArray(),a={};return n(t).each(function(t,o){a[o.name]=o.value}),wphc_do_ajax(n("#wphc-history").length?"wphc_autoload_reactivate":"wphc_autoload_deactivate",a,"wphc-autoload-list"),n("#wphc-btn-autoload-list").prop("disabled",!1),n("#wphc-btn-autoload-history").prop("disabled",!1),!1}),n("#wphc-autoload-list").length});